---
import { getCollection } from 'astro:content'

import Layout from '../../layouts/layout.astro'
import ProjectThumbnailList from '../../components/project-thumbnail-list.astro'

const title = 'My work'
const meta = {
	description:
		'Here is a list of some of the projects I have done or Iâ€™m currently working on.',
}

const allProjects = await getCollection('project')
const projects = allProjects
	.sort(
		(a, b) =>
			b.data.date.year - a.data.date.year ||
			b.data.date.month - a.data.date.month,
	)
	.map((project) => ({
		id: project.id,
		thumbnail: project.data.thumbnail,
		title: project.data.title,
	}))
---

<Layout title={title} meta={meta}>
	<article class="work-page">
		<h1>{title}<span class="period">.</span></h1>
		<ProjectThumbnailList class="work-list" items={projects} />
	</article>
</Layout>

<style lang="scss">
	@use '../../styles/utils';

	@layer layout {
		.work-page {
			@include utils.forward-grid;

			h1 {
				@include utils.text-wrap;
			}
		}

		.work-list {
			grid-column: 1 / span 13;
		}
	}
</style>
